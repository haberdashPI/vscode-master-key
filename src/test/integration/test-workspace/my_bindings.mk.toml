#:master-keybindings

[header]
version = "2.0.0"
name = "Simple Motions"

[[mode]]
name = "insert"
whenNoBinding = "insertCharacters"

[[mode]]
name = "normal"
default = true
highlight = "Highlight"
cursorShape = "Block"
whenNoBinding = "ignoreCharacters"

[[bind]]
doc.name = "normal mode"
key = "escape"
command = "master-key.enterNormal"
prefixes.any = true

[[define.bind]]
id = "motion"
command = "cursorMove"
mode = "normal"
args.value = "{{key.count}}"

[[bind]]
default = "{{bind.motion}}"
doc.name = "left"
key = "h"
args.to = "left"

[[bind]]
default = "{{bind.motion}}"
doc.name = "right"
key = "l"
args.to = "right"

[[bind]]
default = "{{bind.motion}}"
doc.name = "down"
key = "j"
args.to = "down"

[[bind]]
default = "{{bind.motion}}"
doc.name = "up"
key = "k"
args.to = "up"

[[bind]]
doc.name = "insert mode"
key = "i"
command = "master-key.enterInsert"
mode = "normal"
when = "editorTextFocus"

[[bind]]
doc.name = "ignore"
key = "u"
command = "master-key.ignore"
mode = "normal"
when = "editorTextFocus"

[[bind]]
doc.name = "delete"
key = "d"
mode = "normal"
command = "runCommands"
when = "editorTextFocus"

[[bind.args.commands]]
command = "master-key.prefix"
args.cursor = "Underline"

[[bind.args.commands]]
command = "master-key.storeCommand"
args.command = "deleteRight"
args.register = "operation"

[[bind]]
doc.name = "word operation"
key = "w"
mode = "normal"
#- to qualify from word *motion*
prefixes.anyOf = ["d"]
command = "runCommands"
when = "editorTextFocus"

[[bind.args.commands]]
command = "cursorWordEndRightSelect"

[[bind.args.commands]]
command = "master-key.executeStoredCommand"
args.register = "operation"

[[bind]]
foreach.num = ["{{keys(`[0-3]`)}}"]
key = "{{num}}"
mode = "normal"
doc.name = "count {{num}}"
command = "master-key.updateCount"
args.value = "{{num}}"
finalKey = false
when = "editorTextFocus"

[[bind]]
key = "shift+g"
mode = "normal"
doc.name = "normal-left mode"
command = "master-key.setMode"
args.value = "normal-left"
when = "editorTextFocus"

[[mode]]
name = "normal-left"
whenNoBinding.useMode = "normal"

[[bind]]
default = "{{bind.motion}}"
key = "shift+h"
mode = "normal-left"
doc.name = "left"
when = "editorTextFocus"
command = "cursorMove"
args.to = "left"

[[bind]]
default = "{{bind.motion}}"
doc.name = "double left"
mode = "normal-left"
key = "shift+l"
args.to = "left"
args.value = "{{2}}"
